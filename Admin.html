<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<style>
body{background:#111;color:white;font-family:Arial;padding:30px;}
.hidden{display:none;}
input,select,button{padding:8px;margin:5px;border-radius:20px;border:none;}
button{background:gold;cursor:pointer;}
.box{background:#1e1e2f;padding:15px;margin:10px 0;border-radius:12px;}
textarea{width:100%;height:60px;border-radius:10px;padding:5px;}
</style>
</head>
<body>

<h1>Admin Panel</h1>

<div id="loginBox">
<input type="password" id="adminPass" placeholder="Admin Password">
<button onclick="adminLogin()">Login</button>
</div>

<div id="adminPanel" class="hidden">

<h2>Add Food / Drink</h2>
<input id="itemName" placeholder="Name">
<input id="itemPrice" type="number" placeholder="Price">
<input id="itemSale" placeholder="Sale (ex: 10% Ramadan)">
<select id="itemCategory" onchange="toggleDrink()">
<option value="Food">Food</option>
<option value="Drinks">Drinks</option>
</select>

<select id="literSelect" class="hidden">
<option value="250ml">250ml</option>
<option value="500ml">500ml</option>
<option value="1L">1L</option>
<option value="2L">2L</option>
</select>

<button onclick="addNormalItem()">Add Item</button>

<h2>Create Combo</h2>
<input id="comboName" placeholder="Combo Name">
<textarea id="comboItems" placeholder="Example:
Burger x2
Fries x1
Cola x2"></textarea>
<input id="comboPrice" type="number" placeholder="Combo Price">
<button onclick="addCombo()">Add Combo</button>

<h2>All Items (Delete)</h2>
<div id="allItems"></div>

<h2>All Receipts</h2>
<div id="ordersList"></div>

</div>

<script>

const ADMIN_PASSWORD="iftar123";

function adminLogin(){
    if(document.getElementById("adminPass").value===ADMIN_PASSWORD){
        document.getElementById("loginBox").classList.add("hidden");
        document.getElementById("adminPanel").classList.remove("hidden");
        loadItems();
        loadOrders();
    }else alert("Wrong password");
}

function toggleDrink(){
    const cat=document.getElementById("itemCategory").value;
    const liter=document.getElementById("literSelect");
    if(cat==="Drinks") liter.classList.remove("hidden");
    else liter.classList.add("hidden");
}

function addNormalItem(){
    const name=document.getElementById("itemName").value.trim();
    const price=document.getElementById("itemPrice").value;
    const sale=document.getElementById("itemSale").value.trim();
    const cat=document.getElementById("itemCategory").value;
    const liter=document.getElementById("literSelect").value;

    if(!name||!price) return alert("Fill fields");

    let finalName=name;
    if(cat==="Drinks") finalName+=" ("+liter+")";

    let items=JSON.parse(localStorage.getItem("menuItems"))||[];
    items.push({type:cat,name:finalName,price:price,sale:sale});
    localStorage.setItem("menuItems",JSON.stringify(items));
    loadItems();
}

function addCombo(){
    const name=document.getElementById("comboName").value.trim();
    const itemsText=document.getElementById("comboItems").value.trim();
    const price=document.getElementById("comboPrice").value;

    if(!name||!itemsText||!price) return alert("Fill combo fields");

    let items=JSON.parse(localStorage.getItem("menuItems"))||[];
    items.push({
        type:"Combo",
        name:name,
        comboItems:itemsText.split("\n"),
        price:price
    });

    localStorage.setItem("menuItems",JSON.stringify(items));
    loadItems();
}

function deleteItem(index){
    let items=JSON.parse(localStorage.getItem("menuItems"))||[];
    items.splice(index,1);
    localStorage.setItem("menuItems",JSON.stringify(items));
    loadItems();
}

function loadItems(){
    const items=JSON.parse(localStorage.getItem("menuItems"))||[];
    const div=document.getElementById("allItems");
    div.innerHTML="";

    items.forEach((item,i)=>{
        div.innerHTML+=`
        <div class="box">
            <strong>${item.name}</strong> - ${item.price} SAR
            <button onclick="deleteItem(${i})">Delete</button>
        </div>`;
    });
}

function loadOrders(){
    const orders=JSON.parse(localStorage.getItem("orders"))||[];
    const div=document.getElementById("ordersList");
    div.innerHTML="";

    orders.forEach((o,i)=>{
        let itemsHTML="";
        o.items.forEach(it=>{
            itemsHTML+=`<li>${it.name} - ${it.price}</li>`;
        });

        div.innerHTML+=`
        <div class="box" id="receipt${i}">
            <h3>${o.username}</h3>
            <p>Phone: ${o.number}</p>
            <ul>${itemsHTML}</ul>
            <p>Total: ${o.total} SAR</p>
            <button onclick="printReceipt('receipt${i}')">Print</button>
        </div>`;
    });
}

function printReceipt(id){
    const content=document.getElementById(id).innerHTML;
    const win=window.open("");
    win.document.write(content);
    win.print();
}

</script>
</body>
</html>